version: "2.0"

rules:


## SMALL TALK ##

- rule: Say goodbye anytime the user says goodbye
  steps:
  - intent: goodbye
  - action: utter_goodbye

- rule: Say 'I am a bot' anytime the user challenges
  steps:
  - intent: bot_challenge
  - action: utter_iamabot


## REGISTRATION + AUTHENTICATION ##

- rule: Register new user if they want to register
  steps:
  - intent: add_new_user
  - action: new_user_form
  - action: custom_action_add_new_user

- rule: Tell user that they are already registered
  condition:
  - slot_was_set:
    - user_registered: true
  steps:
  - intent: add_new_user
  - action: utter_already_registered


## ARTIST SUBSCRIPTION ##

- rule: Activate artists subscription form right artist
  steps:
  - intent: subscribe_to_artist
  - action: custom_action_reset_artist_slots
  - action: artist_subscription_form
  - action: custom_action_search_artist
  - slot_was_set:
    - found_artist_uri: "some_artist_uri"
  - action: confirm_artist_form
  - slot_was_set:
    - artist_correct: true
  - action: custom_action_subscribe_to_artist

- rule: Activate artists subscription form wrong artist
  steps:
  - intent: subscribe_to_artist
  - action: custom_action_reset_artist_slots
  - action: artist_subscription_form
  - action: custom_action_search_artist
  - slot_was_set:
    - found_artist_uri: "some_artist_uri"
  - action: confirm_artist_form
  - slot_was_set:
    - artist_correct: false
  - action: utter_canceled_action
  - action: custom_action_reset_artist_slots

- rule: Activate artists subscription form no artist found
  steps:
  - intent: subscribe_to_artist
  - action: custom_action_reset_artist_slots
  - action: artist_subscription_form
  - action: custom_action_search_artist
  - slot_was_set:
    - found_artist_uri: null
  - action: utter_canceled_action
  - action: custom_action_reset_artist_slots


  ## PULL TRACK DATA ##

- rule: User requests new songs from subscribed artists
  steps:
  - intent: request_new_tracks
  - action: utter_takesawhile
  - action: custom_action_get_new_subscribed_songs